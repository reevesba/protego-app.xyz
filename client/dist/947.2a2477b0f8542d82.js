"use strict";(self.webpackChunkprotego=self.webpackChunkprotego||[]).push([[947],{5947:(qt,g,s)=>{s.r(g),s.d(g,{AdminModule:()=>Yt});var m=s(9808),T=s(869),d=s(1402),t=s(5e3),U=s(4594),u=s(4894);let v=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["admin"]],decls:8,vars:3,consts:[["color","primary",1,"mat-elevation-z4"],[1,"protego-title"]],template:function(o,i){1&o&&(t.TgZ(0,"div")(1,"mat-toolbar",0)(2,"span")(3,"p",1),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div"),t._UZ(7,"router-outlet"),t.qZA()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"protego.admin.label")))},directives:[U.Ye,d.lC],pipes:[u.X$],styles:[".mat-toolbar-single-row[_ngcontent-%COMP%]{justify-content:center;padding-top:10px}.protego-title[_ngcontent-%COMP%]{font-weight:700}"]}),e})();var c=s(9224),R=s(5245);function b(e,n){if(1&e&&(t.TgZ(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"mat-icon"),t._uU(7),t.qZA()(),t.TgZ(8,"mat-card-footer")(9,"mat-card-subtitle",3),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&e){const o=n.$implicit;t.Q6J("routerLink",o.link),t.xp6(3),t.Oqu(t.lcZ(4,4,o.title)),t.xp6(4),t.Oqu(o.icon),t.xp6(3),t.Oqu(t.lcZ(11,6,o.subtitle))}}let y=(()=>{class e{constructor(){this.tileList=[{title:"protego.admin.title1",subtitle:"protego.admin.subtitle1",icon:"person_search",link:"../users"},{title:"protego.admin.title2",subtitle:"protego.admin.subtitle2",icon:"vpn_key",link:"../roles"}]}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["dashboard"]],decls:2,vars:1,consts:[[1,"protego-tiles"],["class","protego-tile",3,"routerLink",4,"ngFor","ngForOf"],[1,"protego-tile",3,"routerLink"],[1,"protego-subtitle"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,b,12,8,"mat-card",1),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",i.tileList))},directives:[m.sg,c.a8,d.rH,c.dk,c.n5,c.dn,R.Hw,c.rt,c.$j],pipes:[u.X$],styles:["div.protego-tiles[_ngcontent-%COMP%]{display:grid;grid-gap:15px;padding:15px;margin:auto}.mat-icon[_ngcontent-%COMP%]{font-size:80px;width:100%;text-align:center}.protego-tile[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:250px;width:250px;cursor:pointer}.protego-subtitle[_ngcontent-%COMP%]{padding-left:15px}@media (min-width: 0){div.protego-tiles[_ngcontent-%COMP%]{grid-template-columns:1fr;width:250px}}@media (min-width: 600px){div.protego-tiles[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;width:515px}}@media (min-width: 900px){div.protego-tiles[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;width:515px}}@media (min-width: 1200px){div.protego-tiles[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr;width:780px}}@media (min-width: 1500px){div.protego-tiles[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr;width:1045px}}"]}),e})();var p=s(4847),l=s(2075),_=s(8128),w=s(5144),x=s(7294),C=s(6239),Z=s(7423),h=s(7322),A=s(7531),D=s(4107),N=s(508);function S(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.id")," "))}function Y(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function O(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.firstname")," "))}function q(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.first_name," ")}}function L(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.lastname")," "))}function k(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.last_name," ")}}function M(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.username")," "))}function Q(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.username," ")}}function j(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.email")," "))}function B(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.email," ")}}function $(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.password")," "))}function P(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.password," ")}}function J(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.email.confirmed")," "))}function F(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.email_confirmed_at," ")}}function H(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.active")," "))}function E(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.active," ")}}function I(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.created.at")," "))}function z(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.created_at," ")}}function X(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.updated.at")," "))}function G(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.updated_at," ")}}function V(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.updated.by")," "))}function W(e,n){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.updated_by," ")}}function K(e,n){1&e&&(t.TgZ(0,"th",25),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.users.role")," "))}function tt(e,n){if(1&e&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.name," ")}}function et(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"td",26)(1,"mat-select",27),t.NdJ("selectionChange",function(a){const Ot=t.CHM(o).$implicit;return t.oxw().updateUserRole(a,Ot)}),t.YNc(2,tt,2,2,"mat-option",28),t.qZA()()}if(2&e){const o=n.$implicit,i=t.oxw();t.xp6(1),t.Q6J("placeholder",o.role),t.xp6(1),t.Q6J("ngForOf",i.roles)}}function ot(e,n){1&e&&t._UZ(0,"tr",30)}function nt(e,n){1&e&&t._UZ(0,"tr",31)}function it(e,n){if(1&e&&(t.TgZ(0,"tr",32)(1,"td",33),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e){t.oxw();const o=t.MAs(14);t.xp6(2),t.AsE("",t.lcZ(3,2,"protego.users.empty"),' "',o.value,'"')}}let at=(()=>{class e{constructor(o,i,a,r){this.usersService=o,this.rolesService=i,this.notificationService=a,this.tokenService=r,this.dataSource=new l.by}ngOnInit(){this.username=this.tokenService.username,this.getDisplayColumns(window.innerWidth),this.getUsersRoles(),this.getRoles()}getDisplayColumns(o){this.userColumns=o<750?["username","email","role"]:["username","first_name","last_name","email","role"]}onResize(o){this.getDisplayColumns(window.innerWidth)}getUsersRoles(){this.usersService.getUsersRoles().subscribe({next:o=>{this.usersRoles=o,this.dataSource=new l.by(o),this.usersCount=o.length},error:o=>console.log(o)})}getRoles(){this.rolesService.getRoles().subscribe({next:o=>this.roles=o,error:o=>console.log(o)})}ngAfterViewChecked(){this.dataSource.sort=this.sort}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}updateUserRole(o,i){const a=this.dataSource.filteredData.indexOf(i);i.role_id=o.value,i.updated_by=this.username,this.dataSource[a]=i}saveUsersRole(){for(let o=0;o<this.dataSource.data.length;o++){const{user_id:i,role_id:a,updated_by:r}=this.dataSource.data[o];this.saveUserRole({user_id:i,role_id:a,updated_by:r})}this.notificationService.success("Save Successful")}saveUserRole(o){this.usersService.saveUserRole(o).subscribe(i=>console.log(i))}delete(o){this.usersService.deleteUser(o).subscribe({next:()=>this.notificationService.success("Delete Successful"),error:i=>console.log(i)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(w.f),t.Y36(x.f),t.Y36(C.g),t.Y36(_.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["users"]],viewQuery:function(o,i){if(1&o&&t.Gf(p.YE,5),2&o){let a;t.iGM(a=t.CRH())&&(i.sort=a.first)}},hostBindings:function(o,i){1&o&&t.NdJ("resize",function(r){return i.onResize(r)},!1,t.Jf7)},decls:57,vars:19,consts:[[1,"protego-page-container"],[2,"float","left","padding-top","1em"],["mat-raised-button","","color","primary",3,"click"],[2,"float","right"],["matInput","",3,"placeholder","keyup"],["input",""],[1,"protego-table-container","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","first_name"],["matColumnDef","last_name"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","password"],["matColumnDef","email_confirmed_at"],["matColumnDef","active"],["matColumnDef","created_at"],["matColumnDef","updated_at"],["matColumnDef","updated_by"],["matColumnDef","role",2,"width","100%"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["name","role",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",1)(5,"button",2),t.NdJ("click",function(){return i.saveUsersRole()}),t.ALo(6,"translate"),t._uU(7),t.ALo(8,"translate"),t.qZA()(),t.TgZ(9,"mat-form-field",3)(10,"mat-label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",4,5),t.NdJ("keyup",function(r){return i.applyFilter(r)}),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"div",6)(17,"table",7),t.ynx(18,8),t.YNc(19,S,3,3,"th",9),t.YNc(20,Y,2,1,"td",10),t.BQk(),t.ynx(21,11),t.YNc(22,O,3,3,"th",9),t.YNc(23,q,2,1,"td",10),t.BQk(),t.ynx(24,12),t.YNc(25,L,3,3,"th",9),t.YNc(26,k,2,1,"td",10),t.BQk(),t.ynx(27,13),t.YNc(28,M,3,3,"th",9),t.YNc(29,Q,2,1,"td",10),t.BQk(),t.ynx(30,14),t.YNc(31,j,3,3,"th",9),t.YNc(32,B,2,1,"td",10),t.BQk(),t.ynx(33,15),t.YNc(34,$,3,3,"th",9),t.YNc(35,P,2,1,"td",10),t.BQk(),t.ynx(36,16),t.YNc(37,J,3,3,"th",9),t.YNc(38,F,2,1,"td",10),t.BQk(),t.ynx(39,17),t.YNc(40,H,3,3,"th",9),t.YNc(41,E,2,1,"td",10),t.BQk(),t.ynx(42,18),t.YNc(43,I,3,3,"th",9),t.YNc(44,z,2,1,"td",10),t.BQk(),t.ynx(45,19),t.YNc(46,X,3,3,"th",9),t.YNc(47,G,2,1,"td",10),t.BQk(),t.ynx(48,20),t.YNc(49,V,3,3,"th",9),t.YNc(50,W,2,1,"td",10),t.BQk(),t.ynx(51,21),t.YNc(52,K,3,3,"th",9),t.YNc(53,et,3,2,"td",10),t.BQk(),t.YNc(54,ot,1,0,"tr",22),t.YNc(55,nt,1,0,"tr",23),t.YNc(56,it,4,4,"tr",24),t.qZA()()()),2&o&&(t.xp6(2),t.AsE("",t.lcZ(3,9,"protego.users.title")," (",i.usersCount,")"),t.xp6(3),t.uIk("aria-label",t.lcZ(6,11,"protego.users.aria")),t.xp6(2),t.Oqu(t.lcZ(8,13,"protego.users.button")),t.xp6(4),t.Oqu(t.lcZ(12,15,"protego.users.filter")),t.xp6(2),t.s9C("placeholder",t.lcZ(15,17,"protego.users.filter.placeholder")),t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(37),t.Q6J("matHeaderRowDef",i.userColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.userColumns))},directives:[Z.lW,h.KE,h.hX,A.Nt,l.BZ,p.YE,l.w1,l.fO,l.ge,p.nU,l.Dz,l.ev,D.gD,m.sg,N.ey,l.as,l.XQ,l.nj,l.Gk,l.Ee],pipes:[u.X$],styles:[".protego-page-container[_ngcontent-%COMP%]{padding:2em;width:60%;margin:auto}table[_ngcontent-%COMP%]{width:100%}@media (max-width: 1200px){.protego-page-container[_ngcontent-%COMP%]{padding:1em;width:80%;margin:auto}}@media (max-width: 900px){.protego-page-container[_ngcontent-%COMP%]{padding:1em;width:90%;margin:auto}}@media (max-width: 600px){.protego-page-container[_ngcontent-%COMP%]{width:100%;padding:5px}}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.protego-table-container[_ngcontent-%COMP%]{clear:both;width:100%;min-width:700px}@media (max-width: 600px){.protego-table-container[_ngcontent-%COMP%]{min-width:450px}.mat-column-role[_ngcontent-%COMP%]{width:13%}}.mat-column-role[_ngcontent-%COMP%]{width:13%}  .default-theme .mat-select-placeholder{color:#000}"]}),e})();var lt=s(5980),st=s(8966);function rt(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.id")," "))}function ct(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function pt(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.name")," "))}function mt(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.name," ")}}function dt(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.description")," "))}function ut(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.description," ")}}function ht(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.active")," "))}function ft(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.active," ")}}function gt(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.created.at")," "))}function _t(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.created_at," ")}}function xt(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.updated.at")," "))}function Ct(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.updated_at," ")}}function Zt(e,n){1&e&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.updated.by")," "))}function At(e,n){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o.updated_by," ")}}function Tt(e,n){1&e&&(t.TgZ(0,"th",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"protego.roles.action")," "))}function Ut(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().openDialog("Update",a)}),t.ALo(1,"translate"),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&e&&(t.uIk("aria-label",t.lcZ(1,2,"protego.roles.aria3")),t.xp6(2),t.Oqu(t.lcZ(3,4,"protego.roles.button3")))}function vt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit;return t.oxw().openDialog("Delete",a)}),t.ALo(1,"translate"),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&e&&(t.uIk("aria-label",t.lcZ(1,2,"protego.roles.aria4")),t.xp6(2),t.Oqu(t.lcZ(3,4,"protego.roles.button4")))}function Rt(e,n){if(1&e&&(t.TgZ(0,"td",27),t.YNc(1,Ut,4,6,"button",28),t.YNc(2,vt,4,6,"button",29),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",null!=o.id),t.xp6(1),t.Q6J("ngIf",null!=o.id)}}function bt(e,n){1&e&&t._UZ(0,"tr",31)}function yt(e,n){1&e&&t._UZ(0,"tr",32)}function wt(e,n){1&e&&(t.TgZ(0,"tr",33)(1,"td",34),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"protego.roles.empty")))}let Dt=(()=>{class e{constructor(o,i,a,r){this.dialog=o,this.rolesService=i,this.notificationService=a,this.tokenService=r,this.roleColumns=["name","description","updated_by","action"],this.dataSource=new l.by,this.updatedRoles=new Array}ngOnInit(){this.username=this.tokenService.username,this.getRoles()}getRoles(){this.rolesService.getRoles().subscribe({next:o=>{this.roles=o,this.dataSource=new l.by(o),this.rolesCount=o.length},error:o=>console.log(o)})}openDialog(o,i){i.action=o,this.dialog.open(lt.y,{width:"300px",data:{id:i.id,label1:"Name",label2:"Description",value1:i.name,value2:i.description,action:o},disableClose:!0}).afterClosed().subscribe(r=>{"Add"==r.event?this.addRowData(r.data):"Update"==r.event?this.updateRowData(r.data):"Delete"==r.event&&this.deleteRowData(r.data)})}addRowData(o){this.dataSource.data.push({name:o.value1,description:o.value2,created_by:this.username}),this.dataSource.data=[...this.dataSource.data],this.rolesCount++,this.table.renderRows()}updateRowData(o){this.dataSource.data=this.dataSource.data.filter((i,a)=>(i.id==o.id&&(i.name=o.value1,i.description=o.value2,i.updated_by=this.username,this.updatedRoles.push(o.id)),!0))}deleteRowData(o){this.dataSource.data=this.dataSource.data.filter((i,a)=>i.id!=o.id),this.rolesCount--,this.deleteRole(o.id)}ngAfterViewChecked(){this.dataSource.sort=this.sort}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase()}saveRoles(){for(let o=0;o<this.dataSource.data.length;o++)if(delete this.dataSource.data[o].action,null==this.dataSource.data[o].id)this.saveRole(this.dataSource.data[o]);else if(this.updatedRoles.indexOf(this.dataSource.data[o].id)>-1){const{name:i,description:a,updated_by:r}=this.dataSource.data[o];this.updateRole({name:i,description:a,updated_by:r},this.dataSource.data[o].id)}this.notificationService.success("Save Successful")}saveRole(o){this.rolesService.saveRole(o).subscribe({next:()=>this.getRoles(),error:i=>console.log(i)})}updateRole(o,i){this.rolesService.updateRole(o,i).subscribe({next:()=>this.getRoles(),error:a=>console.log(a)})}deleteRole(o){this.rolesService.deleteRole(o).subscribe({next:()=>this.notificationService.success("Delete Successful"),error:i=>console.log(i)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(st.uw),t.Y36(x.f),t.Y36(C.g),t.Y36(_.B))},e.\u0275cmp=t.Xpm({type:e,selectors:[["roles"]],viewQuery:function(o,i){if(1&o&&(t.Gf(l.BZ,7),t.Gf(p.YE,5)),2&o){let a;t.iGM(a=t.CRH())&&(i.table=a.first),t.iGM(a=t.CRH())&&(i.sort=a.first)}},decls:50,vars:25,consts:[[1,"protego-page-container"],[2,"float","left","padding-top","1em"],["mat-button","","mat-raised-button","","color","primary",3,"click"],[2,"float","right"],["matInput","",3,"placeholder","keyup"],["input",""],[1,"protego-table-container","mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["roleTable",""],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","active"],["matColumnDef","created_at"],["matColumnDef","updated_at"],["matColumnDef","updated_by"],["matColumnDef","action"],["mat-header-cell","","class","protego-fixed-column",4,"matHeaderCellDef"],["mat-cell","","class","action-link",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"protego-fixed-column"],["mat-cell","",1,"action-link"],["mat-button","","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","mat-raised-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",1)(5,"button",2),t.NdJ("click",function(){return i.openDialog("Add",{})}),t.ALo(6,"translate"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",2),t.NdJ("click",function(){return i.saveRoles()}),t.ALo(10,"translate"),t._uU(11),t.ALo(12,"translate"),t.qZA()(),t.TgZ(13,"mat-form-field",3)(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"input",4,5),t.NdJ("keyup",function(r){return i.applyFilter(r)}),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",6)(21,"table",7,8),t.ynx(23,9),t.YNc(24,rt,3,3,"th",10),t.YNc(25,ct,2,1,"td",11),t.BQk(),t.ynx(26,12),t.YNc(27,pt,3,3,"th",10),t.YNc(28,mt,2,1,"td",11),t.BQk(),t.ynx(29,13),t.YNc(30,dt,3,3,"th",10),t.YNc(31,ut,2,1,"td",11),t.BQk(),t.ynx(32,14),t.YNc(33,ht,3,3,"th",10),t.YNc(34,ft,2,1,"td",11),t.BQk(),t.ynx(35,15),t.YNc(36,gt,3,3,"th",10),t.YNc(37,_t,2,1,"td",11),t.BQk(),t.ynx(38,16),t.YNc(39,xt,3,3,"th",10),t.YNc(40,Ct,2,1,"td",11),t.BQk(),t.ynx(41,17),t.YNc(42,Zt,3,3,"th",10),t.YNc(43,At,2,1,"td",11),t.BQk(),t.ynx(44,18),t.YNc(45,Tt,3,3,"th",19),t.YNc(46,Rt,3,2,"td",20),t.BQk(),t.YNc(47,bt,1,0,"tr",21),t.YNc(48,yt,1,0,"tr",22),t.YNc(49,wt,4,3,"tr",23),t.qZA()()()),2&o&&(t.xp6(2),t.AsE("",t.lcZ(3,11,"protego.roles.title")," (",i.rolesCount,")"),t.xp6(3),t.uIk("aria-label",t.lcZ(6,13,"protego.roles.aria1")),t.xp6(2),t.Oqu(t.lcZ(8,15,"protego.roles.button1")),t.xp6(2),t.uIk("aria-label",t.lcZ(10,17,"protego.roles.aria2")),t.xp6(2),t.Oqu(t.lcZ(12,19,"protego.roles.button2")),t.xp6(4),t.Oqu(t.lcZ(16,21,"protego.roles.filter")),t.xp6(2),t.s9C("placeholder",t.lcZ(19,23,"protego.roles.filter.placeholder")),t.xp6(4),t.Q6J("dataSource",i.dataSource),t.xp6(26),t.Q6J("matHeaderRowDef",i.roleColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.roleColumns))},directives:[Z.lW,h.KE,h.hX,A.Nt,l.BZ,p.YE,l.w1,l.fO,l.ge,p.nU,l.Dz,l.ev,m.O5,l.as,l.XQ,l.nj,l.Gk,l.Ee],pipes:[u.X$],styles:[".protego-page-container[_ngcontent-%COMP%]{padding:2em;width:60%;margin:auto}@media (max-width: 900px){.protego-page-container[_ngcontent-%COMP%]{width:100%;padding:1em}}table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.protego-table-container[_ngcontent-%COMP%]{clear:both;width:100%;min-width:700px}@media (max-width: 600px){.protego-table-container[_ngcontent-%COMP%]{min-width:450px}}button[_ngcontent-%COMP%]{margin:5px}.protego-fixed-column[_ngcontent-%COMP%]{width:190px}"]}),e})();var f=s(6275);const Nt=[{path:"",component:v,canActivate:[f.B6],data:{title:"protego.menu.admin",roles:["admin"]},children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:y,canActivate:[f.B6],data:{title:"protego.menu.admin",roles:["admin"]}},{path:"users",component:at,canActivate:[f.B6],data:{title:"protego.menu.users",roles:["admin"]}},{path:"roles",component:Dt,canActivate:[f.B6],data:{title:"protego.menu.roles",roles:["admin"]}}]}];let St=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(Nt)],d.Bz]}),e})(),Yt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,T.m,St]]}),e})()}}]);