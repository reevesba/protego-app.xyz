<div class='protego-page-container'>
    <mat-card class="protego-create-account-form">
        <form class="protego-form" [formGroup]="registerForm">
            <mat-card-title>{{ 'protego.signup.create' | translate }}</mat-card-title>
            <mat-card-content>
                <mat-form-field class="protego-full-width">
                    <input matInput type="text" placeholder="{{ 'protego.signup.username' | translate }}" formControlName="username" required>
                    <mat-hint align="end">{{ 'protego.signup.username.hint' | translate }}</mat-hint>
                    <mat-error *ngIf="(registerFormControl.username.touched || submitted) && registerFormControl.username.errors?.required">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.username.warn1' | translate }}
                    </mat-error>
                    <mat-error *ngIf="(registerFormControl.username.touched || submitted) && registerFormControl.username.errors?.userNameNotAvailable">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.username.warn2' | translate }}
                    </mat-error>
                    <mat-error *ngIf="(registerFormControl.username.touched || submitted) && registerFormControl.username.errors?.maxlength">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.username.warn3' | translate }}
                    </mat-error>
                </mat-form-field>
                
                <mat-form-field class="protego-full-width">
                    <input matInput type="text" placeholder="{{ 'protego.signup.firstname' | translate }}" formControlName="first_name" required>
                    <mat-hint align="end"></mat-hint>
                    <mat-error *ngIf="(registerFormControl.first_name.touched || submitted) && registerFormControl.first_name.errors?.required">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.firstname.warn' | translate }}
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="protego-full-width">
                    <input matInput type="text" placeholder="{{ 'protego.signup.lastname' | translate }}" formControlName="last_name" required>
                    <mat-hint align="end"></mat-hint>
                    <mat-error *ngIf="(registerFormControl.last_name.touched || submitted) && registerFormControl.last_name.errors?.required">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.lastname.warn' | translate }}
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="protego-full-width">
                    <input matInput type="text" placeholder="{{ 'protego.signup.email' | translate }}" formControlName="email" required>
                    <mat-hint align="end"></mat-hint>
                    <mat-error *ngIf="(registerFormControl.email.touched || submitted) && registerFormControl.email.errors?.required">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.email.warn1' | translate }}
                    </mat-error>
                    <mat-error *ngIf="(registerFormControl.email.touched || submitted) && registerFormControl.email.errors?.email">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.email.warn2' | translate }}
                    </mat-error>
                    <mat-error *ngIf="(registerFormControl.email.touched || submitted) && registerFormControl.email.errors?.emailNotAvailable">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.email.warn3' | translate }}
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="protego-full-width">
                    <input matInput [type]="hide1?'password':'text'" placeholder="{{ 'protego.signup.password' | translate }}" formControlName="password" required appPassword>
                    <mat-hint align="end"></mat-hint>
                    <mat-error *ngIf="(registerFormControl.password.touched || submitted) && registerFormControl.password.errors?.required">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.password.warn1' | translate }}
                    </mat-error>
                    <mat-error *ngIf="(registerFormControl.password.touched || submitted) && registerFormControl.password.errors?.invalidPassword">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.password.warn2' | translate }}
                    </mat-error>
                    <mat-icon matSuffix (click)="hide1 = !hide1" style="cursor: pointer;">{{hide1?'visibility_off':'visibility'}}</mat-icon>
                </mat-form-field>

                <mat-form-field class="protego-full-width">
                    <input matInput [type]="hide2?'password':'text'" placeholder="{{ 'protego.signup.confirm' | translate }}" formControlName="confirm_password" required>
                    <mat-hint align="end"></mat-hint>
                    <mat-error *ngIf="(registerFormControl.confirm_password.touched || submitted) && registerFormControl.confirm_password.errors?.required">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.confirm.warn1' | translate }}
                    </mat-error>
                    <mat-error *ngIf="(registerFormControl.confirm_password.touched || submitted) && registerFormControl.confirm_password.errors?.passwordMismatch">
                        <mat-icon style="margin-right: 2px;">error_outline</mat-icon>
                        {{ 'protego.signup.confirm.warn1' | translate }}
                    </mat-error>
                    <mat-icon matSuffix (click)="hide2 = !hide2" style="cursor: pointer;">{{hide2?'visibility_off':'visibility'}}</mat-icon>
                </mat-form-field>
            </mat-card-content>
        </form>
        <div class="protego-recaptcha">
            <re-captcha (resolved)="resolved($event)" (error)="onError($event)" errorMode="handled" siteKey="{{ siteKey }}"></re-captcha>
        </div>
        <mat-card-actions>
            <button type="submit" mat-raised-button (click)="onSubmit()" color="primary" [disabled]="!registerForm.valid || !recaptchaComplete" class="protego-button" attr.aria-label="{{ 'protego.signup.aria' | translate }}">{{ 'protego.signup.button' | translate }}</button>
        </mat-card-actions>
        <mat-card-footer>
            <mat-progress-bar *ngIf="loading" mode='query'></mat-progress-bar>
            </mat-card-footer>
    </mat-card>
</div>
