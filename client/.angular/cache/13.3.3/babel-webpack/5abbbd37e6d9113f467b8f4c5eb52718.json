{"ast":null,"code":"import { MatTableDataSource } from '@angular/material/table';\nimport { MatPaginator } from '@angular/material/paginator';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatSort } from '@angular/material/sort';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { GroupService } from '../api-settings/services/group.service';\nimport { PayloadService } from '../services/payload.service';\nimport { DialogBoxComponent } from '../../../shared/dialog-box/dialog-box.component';\nimport { BulkDialogBoxComponent } from './bulk-dialog-box/bulk-dialog-box.component';\nimport { NotificationService } from '../../../core/notifications/notification.service';\nimport { TokenService } from '../../../shared/services/token.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"../api-settings/services/group.service\";\nimport * as i3 from \"../services/payload.service\";\nimport * as i4 from \"../../../core/notifications/notification.service\";\nimport * as i5 from \"../../../shared/services/token.service\";\nimport * as i6 from \"@angular/material/divider\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/material/form-field\";\nimport * as i11 from \"@angular/material/select\";\nimport * as i12 from \"@angular/material/core\";\nimport * as i13 from \"@angular/material/table\";\nimport * as i14 from \"@angular/material/sort\";\nimport * as i15 from \"@angular/material/checkbox\";\nimport * as i16 from \"@angular/material/progress-bar\";\nimport * as i17 from \"@angular/material/paginator\";\nimport * as i18 from \"@ngx-translate/core\";\nconst _c0 = [\"payloadTable\"];\n\nfunction LabelComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 35);\n  }\n}\n\nfunction LabelComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"h6\", 37);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function LabelComponent_div_12_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.openBulkActionDialog(\"Update\");\n    });\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function LabelComponent_div_12_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return ctx_r34.openBulkActionDialog(\"Delete\");\n    });\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵelementStart(10, \"mat-icon\");\n    i0.ɵɵtext(11, \"delete_forever\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 4, \"protego.labels.bulk\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(5, 6, \"protego.api-tokens.aria1\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 8, \"protego.payload.button1\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(9, 10, \"protego.api-tokens.aria2\"));\n  }\n}\n\nfunction LabelComponent_mat_option_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const group_r35 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", group_r35.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", group_r35.name, \" \");\n  }\n}\n\nfunction LabelComponent_th_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"th\", 41)(1, \"mat-checkbox\", 42);\n    i0.ɵɵlistener(\"change\", function LabelComponent_th_24_Template_mat_checkbox_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r37);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return $event ? ctx_r36.masterToggle() : null;\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r5.selection.hasValue() && (ctx_r5.isAllSelected() || ctx_r5.isAnySelected()))(\"indeterminate\", ctx_r5.selection.hasValue() && !ctx_r5.isAllSelected());\n  }\n}\n\nfunction LabelComponent_td_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 43)(1, \"mat-checkbox\", 44);\n    i0.ɵɵlistener(\"click\", function LabelComponent_td_25_Template_mat_checkbox_click_1_listener($event) {\n      return $event.stopPropagation();\n    })(\"change\", function LabelComponent_td_25_Template_mat_checkbox_change_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r41);\n      const row_r38 = restoredCtx.$implicit;\n      const ctx_r40 = i0.ɵɵnextContext();\n      return $event ? ctx_r40.selection.toggle(row_r38) : null;\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const row_r38 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", ctx_r6.selection.isSelected(row_r38));\n  }\n}\n\nfunction LabelComponent_th_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.id\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r42 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r42.id, \" \");\n  }\n}\n\nfunction LabelComponent_th_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.payload\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 46);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r43 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r43.payload, \" \");\n  }\n}\n\nfunction LabelComponent_th_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.group-id\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r44 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r44.group_id, \" \");\n  }\n}\n\nfunction LabelComponent_th_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.classification\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r45 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r45.classification, \" \");\n  }\n}\n\nfunction LabelComponent_th_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.active\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r46 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r46.active, \" \");\n  }\n}\n\nfunction LabelComponent_th_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.created.at\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r47 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r47.created_at, \" \");\n  }\n}\n\nfunction LabelComponent_th_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.created.by\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r48 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r48.created_by, \" \");\n  }\n}\n\nfunction LabelComponent_th_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.updated.at\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r49 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r49.updated_at, \" \");\n  }\n}\n\nfunction LabelComponent_th_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.updated.by\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const payload_r50 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", payload_r50.updated_by, \" \");\n  }\n}\n\nfunction LabelComponent_th_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"protego.payload.action\"), \" \");\n  }\n}\n\nfunction LabelComponent_td_55_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 51);\n    i0.ɵɵlistener(\"click\", function LabelComponent_td_55_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r56);\n      const element_r51 = i0.ɵɵnextContext().$implicit;\n      const ctx_r54 = i0.ɵɵnextContext();\n      return ctx_r54.openPayloadDialog(\"Update\", element_r51);\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"edit\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"protego.payload.aria3\"));\n  }\n}\n\nfunction LabelComponent_td_55_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r59 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function LabelComponent_td_55_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r59);\n      const element_r51 = i0.ɵɵnextContext().$implicit;\n      const ctx_r57 = i0.ɵɵnextContext();\n      return ctx_r57.openPayloadDialog(\"Delete\", element_r51);\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"delete_forever\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"protego.payload.aria4\"));\n  }\n}\n\nfunction LabelComponent_td_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 48);\n    i0.ɵɵtemplate(1, LabelComponent_td_55_button_1_Template, 4, 3, \"button\", 49);\n    i0.ɵɵtemplate(2, LabelComponent_td_55_button_2_Template, 4, 3, \"button\", 50);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r51 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r51.id != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", element_r51.id != null);\n  }\n}\n\nfunction LabelComponent_tr_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 53);\n  }\n}\n\nfunction LabelComponent_tr_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 54);\n  }\n}\n\nfunction LabelComponent_tr_58_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r63 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementStart(3, \"a\", 58);\n    i0.ɵɵlistener(\"click\", function LabelComponent_tr_58_span_4_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r63);\n      const ctx_r62 = i0.ɵɵnextContext(2);\n      return ctx_r62.loadPayloads();\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \".\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 2, \"protego.labels.load1\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 4, \"protego.labels.load2\"));\n  }\n}\n\nfunction LabelComponent_tr_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 55)(1, \"td\", 56);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵtemplate(4, LabelComponent_tr_58_span_4_Template, 7, 6, \"span\", 57);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r29 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 2, \"protego.payload.empty\"), \". \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r29.currentGroup);\n  }\n}\n\nfunction LabelComponent_mat_progress_bar_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 59);\n  }\n}\n\nexport let LabelComponent = /*#__PURE__*/(() => {\n  class LabelComponent {\n    constructor(dialog, groupService, payloadService, notificationService, tokenService) {\n      this.dialog = dialog;\n      this.groupService = groupService;\n      this.payloadService = payloadService;\n      this.notificationService = notificationService;\n      this.tokenService = tokenService;\n      this.payloadDataSource = new MatTableDataSource();\n      this.selection = new SelectionModel(true, []);\n      this.updatedPayloads = new Array(); // Paginator\n\n      this.isLoading = false;\n      this.totalRows = 0;\n      this.pageIndex = 0;\n      this.pageSizeOptions = [5, 10, 100, 1000];\n      this.pageSize = this.pageSizeOptions[0];\n    }\n\n    ngOnInit() {\n      this.username = this.tokenService.username;\n      this.getDisplayColumns(window.innerWidth);\n      this.getUserGroups();\n    }\n\n    getDisplayColumns(innerWidth) {\n      if (innerWidth >= 750) {\n        this.payloadColumns = ['select', 'id', 'payload', 'classification', 'created_by', 'updated_by', 'action'];\n      } else {\n        this.payloadColumns = ['select', 'id', 'payload', 'classification', 'action'];\n      }\n    }\n\n    onResize(event) {\n      this.getDisplayColumns(window.innerWidth);\n    }\n\n    getUserGroups() {\n      this.groupService.getUserGroups(this.username).subscribe({\n        next: v => {\n          this.groups = v, this.currentGroup = v.length <= 0 ? 0 : v[0]['id'], this.currentGroupAdmin = v.length <= 0 ? '' : v[0]['admin'], this.currentGroupName = v.length <= 0 ? '' : v[0]['name'];\n          this.getGroupPayloads(this.currentGroup);\n        },\n        error: e => console.log(e)\n      });\n    }\n\n    getGroupPayloads(groupId) {\n      this.isLoading = true;\n      this.payloadService.getGroupPayloads(groupId, this.pageSize, this.pageIndex).subscribe({\n        next: v => {\n          this.totalRows = +v.pop(), this.payloads = v, this.payloadDataSource = new MatTableDataSource(v), this.paginator.pageIndex = this.pageIndex, this.paginator.pageSize = this.pageSize, this.paginator.length = this.totalRows, this.isLoading = false;\n        },\n        error: e => console.log(e)\n      });\n    }\n\n    loadPayloads() {\n      this.isLoading = true;\n      this.payloadService.loadPayloads(this.currentGroup).subscribe({\n        next: () => {\n          this.getGroupPayloads(this.currentGroup), this.isLoading = false;\n        },\n        error: e => console.log(e)\n      });\n    }\n\n    pageChanged(event) {\n      this.pageSize = event.pageSize;\n      this.pageIndex = event.pageIndex;\n      this.getGroupPayloads(this.currentGroup);\n    }\n\n    isAllSelected() {\n      const numSelected = this.selection.selected.length;\n      const numRows = this.payloadDataSource.data.length;\n      return numSelected === numRows;\n    }\n\n    isAnySelected() {\n      const numSelected = this.selection.selected.length;\n      return numSelected > 0;\n    }\n\n    masterToggle() {\n      this.isAllSelected() || this.isAnySelected() ? this.selection.clear() : this.payloadDataSource.data.forEach(row => this.selection.select(row));\n    }\n\n    openDeleteDialog(obj) {\n      this.header = 'Delete: ';\n      this.openPayloadDialog('Delete', obj);\n    }\n\n    groupFieldChange(groupId) {\n      const group = this.findGroupById(groupId);\n      this.currentGroup = group['id'];\n      this.currentGroupAdmin = group['admin'];\n      this.currentGroupName = group['name'];\n      this.selection.selected.length = 0;\n      this.selection.clear();\n      this.getGroupPayloads(this.currentGroup);\n    }\n\n    openPayloadDialog(action, obj) {\n      const dialogRef = this.dialog.open(DialogBoxComponent, {\n        width: '350px',\n        data: {\n          id: obj.id,\n          label1: 'Payload',\n          label2: 'Classification',\n          value1: obj.payload,\n          value2: obj.classification,\n          action: action\n        },\n        disableClose: true\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result.event === 'Delete') {\n          this.deletePayloadRowData(result.data);\n        } else if (result.event == 'Update') {\n          this.updateRowData(result.data);\n        }\n      });\n    }\n\n    openBulkActionDialog(action) {\n      const dialogRef = this.dialog.open(BulkDialogBoxComponent, {\n        width: '350px',\n        data: {\n          label1: 'Classification',\n          value1: '',\n          action: action\n        },\n        disableClose: true\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result.event === 'Delete') {\n          this.selection.selected.forEach((value, _) => {\n            this.deletePayloadRowData(value);\n          });\n          this.selection.clear();\n        } else if (result.event == 'Update') {\n          this.selection.selected.forEach((payload, _) => {\n            payload.classification = result.data.value1;\n            this.bulkUpdateRowData(payload);\n          });\n          this.selection.clear();\n        }\n      });\n    }\n\n    deletePayloadRowData(row_obj) {\n      this.payloadDataSource.data = this.payloadDataSource.data.filter((value, _) => {\n        return value['id'] != row_obj.id;\n      });\n      this.totalRows--;\n      this.deletePayload(row_obj.id);\n    }\n\n    bulkUpdateRowData(payload) {\n      this.updatePayload({\n        \"payload\": payload.payload,\n        \"classification\": payload.classification,\n        \"updated_by\": this.username\n      }, payload['id']);\n    }\n\n    updateRowData(row_obj) {\n      this.payloadDataSource.data = this.payloadDataSource.data.filter((value, _) => {\n        if (value['id'] == row_obj.id) {\n          value['payload'] = row_obj.value1;\n          value['classification'] = row_obj.value2;\n          value['updated_by'] = this.username;\n          this.updatePayload({\n            \"payload\": row_obj.value1,\n            \"classification\": row_obj.value2,\n            \"updated_by\": this.username\n          }, row_obj.id);\n        }\n\n        return true;\n      });\n    }\n\n    ngAfterViewChecked() {\n      this.payloadDataSource.sort = this.sortA;\n    }\n\n    findGroupById(groupId) {\n      for (let i = 0; i < this.groups.length; i++) {\n        if (this.groups[i]['id'] === groupId) {\n          return this.groups[i];\n        }\n      }\n\n      return null;\n    }\n\n    updatePayload(payload, payloadId) {\n      this.payloadService.updatePayload(payload, payloadId).subscribe({\n        next: () => this.getGroupPayloads(this.currentGroup),\n        error: e => console.log(e)\n      });\n    }\n\n    deletePayload(payloadId) {\n      this.payloadService.deletePayload(payloadId).subscribe({\n        next: () => {\n          this.deleteFromArray(this.payloads, payloadId), this.getGroupPayloads(this.currentGroup);\n        },\n        error: e => console.log(e)\n      });\n    }\n\n    deleteFromArray(array, key) {\n      array.forEach((value, index) => {\n        if (value.id === key) array.splice(index, 1);\n      });\n    }\n\n  }\n\n  LabelComponent.ɵfac = function LabelComponent_Factory(t) {\n    return new (t || LabelComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.GroupService), i0.ɵɵdirectiveInject(i3.PayloadService), i0.ɵɵdirectiveInject(i4.NotificationService), i0.ɵɵdirectiveInject(i5.TokenService));\n  };\n\n  LabelComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LabelComponent,\n    selectors: [[\"labels\"]],\n    viewQuery: function LabelComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(_c0, 7, MatSort);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sortA = _t.first);\n      }\n    },\n    hostBindings: function LabelComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"resize\", function LabelComponent_resize_HostBindingHandler($event) {\n          return ctx.onResize($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 62,\n    vars: 23,\n    consts: [[1, \"protego-page-container\"], [1, \"protego-divider\"], [2, \"float\", \"left\", \"margin-top\", \"3em\"], [\"style\", \"clear: both;\", 4, \"ngIf\"], [\"style\", \"float: left;\", \"class\", \"protego-bulk-ops\", 4, \"ngIf\"], [1, \"protego-padding-top\", 2, \"float\", \"right\"], [3, \"value\", \"selectionChange\", \"valueChange\"], [\"select\", \"\"], [\"role\", \"option\", 3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"protego-table-container\", \"mat-elevation-z8\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"payloadTable\", \"\"], [\"matColumnDef\", \"select\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"id\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"payload\"], [\"mat-cell\", \"\", \"class\", \"protego-max-column\", 4, \"matCellDef\"], [\"matColumnDef\", \"group_id\"], [\"matColumnDef\", \"classification\"], [\"matColumnDef\", \"active\"], [\"matColumnDef\", \"created_at\"], [\"matColumnDef\", \"created_by\"], [\"matColumnDef\", \"updated_at\"], [\"matColumnDef\", \"updated_by\"], [\"matColumnDef\", \"action\"], [\"mat-header-cell\", \"\", \"class\", \"protego-fixed-column\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"action-link\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"class\", \"mat-row\", 4, \"matNoDataRow\"], [\"mode\", \"query\", 4, \"ngIf\"], [\"showFirstLastButtons\", \"\", \"aria-label\", \"Select page\", 3, \"length\", \"pageIndex\", \"pageSize\", \"pageSizeOptions\", \"page\"], [\"paginator\", \"\"], [2, \"clear\", \"both\"], [1, \"protego-bulk-ops\", 2, \"float\", \"left\"], [2, \"margin\", \"5px\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"float\", \"left\", 3, \"click\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"warn\", 2, \"float\", \"left\", 3, \"click\"], [\"role\", \"option\", 3, \"value\"], [\"mat-header-cell\", \"\"], [3, \"checked\", \"indeterminate\", \"change\"], [\"mat-cell\", \"\"], [3, \"checked\", \"click\", \"change\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\", 1, \"protego-max-column\"], [\"mat-header-cell\", \"\", 1, \"protego-fixed-column\"], [\"mat-cell\", \"\", 1, \"action-link\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", \"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [1, \"mat-row\"], [\"colspan\", \"7\", 1, \"mat-cell\"], [4, \"ngIf\"], [\"href\", \"javascript:void(0);\", 3, \"click\"], [\"mode\", \"query\"]],\n    template: function LabelComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2);\n        i0.ɵɵpipe(3, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5);\n        i0.ɵɵpipe(6, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"mat-divider\", 1);\n        i0.ɵɵelementStart(8, \"div\", 2)(9, \"h3\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(11, LabelComponent_div_11_Template, 1, 0, \"div\", 3);\n        i0.ɵɵtemplate(12, LabelComponent_div_12_Template, 12, 12, \"div\", 4);\n        i0.ɵɵelementStart(13, \"mat-form-field\", 5)(14, \"mat-label\");\n        i0.ɵɵtext(15);\n        i0.ɵɵpipe(16, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-select\", 6, 7);\n        i0.ɵɵlistener(\"selectionChange\", function LabelComponent_Template_mat_select_selectionChange_17_listener($event) {\n          return ctx.groupFieldChange($event.source.value);\n        })(\"valueChange\", function LabelComponent_Template_mat_select_valueChange_17_listener($event) {\n          return ctx.currentGroup = $event;\n        });\n        i0.ɵɵtemplate(19, LabelComponent_mat_option_19_Template, 2, 2, \"mat-option\", 8);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 9)(21, \"table\", 10, 11);\n        i0.ɵɵelementContainerStart(23, 12);\n        i0.ɵɵtemplate(24, LabelComponent_th_24_Template, 2, 2, \"th\", 13);\n        i0.ɵɵtemplate(25, LabelComponent_td_25_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(26, 15);\n        i0.ɵɵtemplate(27, LabelComponent_th_27_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(28, LabelComponent_td_28_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(29, 17);\n        i0.ɵɵtemplate(30, LabelComponent_th_30_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(31, LabelComponent_td_31_Template, 2, 1, \"td\", 18);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(32, 19);\n        i0.ɵɵtemplate(33, LabelComponent_th_33_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(34, LabelComponent_td_34_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(35, 20);\n        i0.ɵɵtemplate(36, LabelComponent_th_36_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(37, LabelComponent_td_37_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(38, 21);\n        i0.ɵɵtemplate(39, LabelComponent_th_39_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(40, LabelComponent_td_40_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(41, 22);\n        i0.ɵɵtemplate(42, LabelComponent_th_42_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(43, LabelComponent_td_43_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(44, 23);\n        i0.ɵɵtemplate(45, LabelComponent_th_45_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(46, LabelComponent_td_46_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(47, 24);\n        i0.ɵɵtemplate(48, LabelComponent_th_48_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(49, LabelComponent_td_49_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(50, 25);\n        i0.ɵɵtemplate(51, LabelComponent_th_51_Template, 3, 3, \"th\", 16);\n        i0.ɵɵtemplate(52, LabelComponent_td_52_Template, 2, 1, \"td\", 14);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(53, 26);\n        i0.ɵɵtemplate(54, LabelComponent_th_54_Template, 3, 3, \"th\", 27);\n        i0.ɵɵtemplate(55, LabelComponent_td_55_Template, 3, 2, \"td\", 28);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(56, LabelComponent_tr_56_Template, 1, 0, \"tr\", 29);\n        i0.ɵɵtemplate(57, LabelComponent_tr_57_Template, 1, 0, \"tr\", 30);\n        i0.ɵɵtemplate(58, LabelComponent_tr_58_Template, 5, 4, \"tr\", 31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(59, LabelComponent_mat_progress_bar_59_Template, 1, 0, \"mat-progress-bar\", 32);\n        i0.ɵɵelementStart(60, \"mat-paginator\", 33, 34);\n        i0.ɵɵlistener(\"page\", function LabelComponent_Template_mat_paginator_page_60_listener($event) {\n          return ctx.pageChanged($event);\n        });\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 17, \"protego.workspace.menu.label\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 19, \"protego.payload.info\"));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate2(\"Group \", ctx.currentGroupName, \" (\", ctx.totalRows, \")\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selection.selected.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selection.selected.length > 0);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 21, \"protego.group-members.select-label\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"value\", ctx.currentGroup);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.groups);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataSource\", ctx.payloadDataSource);\n        i0.ɵɵadvance(35);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.payloadColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.payloadColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"length\", ctx.totalRows)(\"pageIndex\", ctx.pageIndex)(\"pageSize\", ctx.pageSize)(\"pageSizeOptions\", ctx.pageSizeOptions);\n      }\n    },\n    directives: [i6.MatDivider, i7.NgIf, i8.MatButton, i9.MatIcon, i10.MatFormField, i10.MatLabel, i11.MatSelect, i7.NgForOf, i12.MatOption, i13.MatTable, i14.MatSort, i13.MatColumnDef, i13.MatHeaderCellDef, i13.MatHeaderCell, i15.MatCheckbox, i13.MatCellDef, i13.MatCell, i14.MatSortHeader, i13.MatHeaderRowDef, i13.MatHeaderRow, i13.MatRowDef, i13.MatRow, i13.MatNoDataRow, i16.MatProgressBar, i17.MatPaginator],\n    pipes: [i18.TranslatePipe],\n    styles: [\".protego-page-container[_ngcontent-%COMP%]{padding:2em;width:60%;margin:auto}@media (max-width: 900px){.protego-page-container[_ngcontent-%COMP%]{width:100%;padding:1em}}table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.protego-table-container[_ngcontent-%COMP%]{clear:both;width:100%;min-width:700px}@media (max-width: 600px){.protego-table-container[_ngcontent-%COMP%]{min-width:450px}}button[_ngcontent-%COMP%]{margin:5px}.protego-fixed-column[_ngcontent-%COMP%]{width:200px}.protego-max-column[_ngcontent-%COMP%]{white-space:normal;word-wrap:break-word;max-width:150px;padding-right:1em}.protego-float-left[_ngcontent-%COMP%]{padding-top:2em;float:left}.protego-clear[_ngcontent-%COMP%]{padding-top:2em;clear:all}.protego-padding-top[_ngcontent-%COMP%]{padding-top:2em}.protego-clear-padding[_ngcontent-%COMP%]{padding-top:0}.protego-divider[_ngcontent-%COMP%]{margin-top:2em;border-top-width:2px}.action-link.button[_ngcontent-%COMP%]{transform:scale(.9)}.protego-bulk-ops[_ngcontent-%COMP%]{border:1px solid black;border-radius:5px;width:206px;overflow:auto}\"]\n  });\n  return LabelComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}